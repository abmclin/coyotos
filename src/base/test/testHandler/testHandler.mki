module testHandler {
   import rt = coyotos.RunTime;
   import util = coyotos.Util;

   def handler = util.make_ironman_process(PrimeBank, "testHandler");

   export capreg APP {
      KERNLOG = rt.REG.APP0 + 4
   };

   export enum {
      PP_ProcessHandler = 0,
      PP_MemoryHandler = 1
   };

   handler.capReg[APP.KERNLOG] = KernLog();

   def child1 = util.make_ironman_process(PrimeBank, "testProg");
   child1.handler = enter(handler.capReg[rt.REG.INITEPT],
	PP_ProcessHandler);

   def child2 = util.make_ironman_process(PrimeBank, "testProg");
   child2.addrSpace.cap[15] = enter(handler.capReg[rt.REG.INITEPT], 
	PP_MemoryHandler);
   child2.addrSpace.ha = 1;
}